import request from '../utils/request';
import { SERVER_CONFIG } from '../config/server';

/**
 * 获取 WMS 服务
 * @returns {Promise}
 */
export function getWMSService(code, wkid) {
  return request({
    baseURL: SERVER_CONFIG.arcgisQuery,
    url: `/arcgis/services/${code}/MapServer/WMSServer`,
    method: 'get',
    params: {
      SERVICE: 'WMS',
      VERSION: '1.3.0',
      REQUEST: 'GetMap',
      FORMAT: 'image/png',
      TRANSPARENT: true,
      LAYERS: 1,
      layerDefs: '{"1":"1=1"}',
      WIDTH: 256,
      HEIGHT: 256,
      CRS: wkid,
      STYLES: '',
      BBOX: '3357228.890625,338640.7798749999,3365782.55465,347194.44389999984'
    }
  });
}
