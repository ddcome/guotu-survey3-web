import OlMousePosition from 'ol/control/MousePosition';
import { format as olFormat } from 'ol/coordinate';
import OlScaleLine from 'ol/control/ScaleLine';
import { errorMessage } from '../../../utils/error-handler';
import paramToArray from '../../utils/param-to-array';

// 控件生成函数
const controls = {
  mousePosition: () =>
    new OlMousePosition({
      undefinedHTML: '',
      coordinateFormat(coordinate) {
        const text = olFormat(coordinate, '当前鼠标位置 X:{x}, Y:{y}', 4);
        return `<p>${text}</p>`;
      }
    }),
  scaleLine: () => new OlScaleLine()
};

export function getControls(controlNames) {
  const result = [];
  controlNames = paramToArray(controlNames);
  controlNames.forEach((name) => {
    if (controls.hasOwnProperty(name)) {
      result.push(controls[name]());
    } else {
      errorMessage(`控件列表中无法找到 ${name}`);
    }
  });
  return result;
}

export default controls;
