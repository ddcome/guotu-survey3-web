import LayerManagement from '../layer-management';

export default class ImageLayer {
  _imageLayers;
  _olMap;

  constructor(map) {
    this._olMap = map.olMap;
  }

  /**
   * 添加图片图层
   * @param {String} serviceCode 服务代码
   * @param {String} [serverType] 服务类型，例如 MapServer/ImageServer
   * @param {String} [serverId] 服务 ID，例如：0
   * @return {Promise}
   */
  change(serviceCode, serverType, serverId) {
    this._imageLayers && this.remove();

    this._imageLayers = LayerManagement.createImageLayer({
      serviceCode,
      serverType,
      serverId
    });

    this._olMap.addLayer(this._imageLayers);
  }

  /**
   * 移除图片图层
   */
  remove() {
    this._olMap.removeLayer(this._imageLayers);
    this._imageLayers = null;
  }
}
