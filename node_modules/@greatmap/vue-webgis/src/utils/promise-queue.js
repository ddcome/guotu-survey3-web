/**
 * Promise 队列，执行完当前 Promise 才进行下一次
 * @param {Object} context 执行环境
 * @param {Function} promiseFunction
 * @return {Promise<*>}
 */
export default function promiseQueue(context, promiseFunction) {
  context._promiseQueue = context._promiseQueue || Promise.resolve();
  return (context._promiseQueue = context._promiseQueue.then(() => {
    return promiseFunction();
  })).then((res) => {
    context._promiseQueue = Promise.resolve();
    return res;
  });
}
