<template>
  <transition name="webgis-transition-fade">
    <keep-alive>
      <component :data="data" :is="modal" />
    </keep-alive>
  </transition>
</template>

<script>
import AttributeInfo from './attribute-info';
import MeasureSelect from './measure-select';
import LayerSwipe from './layer-swipe';
import { privateEventHubInject } from '../../mixins/private-event-hub';

// 可用的 modal 列表
const modals = {
  'attribute-info': AttributeInfo,
  'measure-select': MeasureSelect,
  'layer-swipe': LayerSwipe
};

export default {
  name: 'WebGISModals',
  mixins: [privateEventHubInject],
  components: {
    ...modals
  },
  data() {
    return {
      data: null,
      modal: ''
    };
  },
  methods: {
    changeModal(modal, data) {
      this.data = data;
      this.modal = modal;
    }
  },
  created() {
    this.$eventHub.$on(['changeModal', 'clear'], this.changeModal);
  },
  beforeDestroy() {
    this.$eventHub.$off(['changeModal', 'clear'], this.changeModal);
  }
};
</script>
