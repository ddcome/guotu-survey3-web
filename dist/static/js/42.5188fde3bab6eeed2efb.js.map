{"version":3,"sources":["webpack:///./node_modules/@greatmap/vue-webgis/lib/feature-select-4964532a.js"],"names":["Object","defineProperty","__webpack_exports__","value","__webpack_require__","__WEBPACK_IMPORTED_MODULE_1_core_js_modules_es6_function_name__","__WEBPACK_IMPORTED_MODULE_2_core_js_modules_es7_array_includes__","n","__WEBPACK_IMPORTED_MODULE_3_core_js_modules_es6_string_includes__","__WEBPACK_IMPORTED_MODULE_4_core_js_modules_es6_array_find__","__WEBPACK_IMPORTED_MODULE_5_core_js_modules_web_dom_iterable__","__WEBPACK_IMPORTED_MODULE_6_core_js_modules_es6_object_keys__","__WEBPACK_IMPORTED_MODULE_8_core_js_library_fn_array_is_array__","__WEBPACK_IMPORTED_MODULE_9__chunk_2f41c7fa_js__","__WEBPACK_IMPORTED_MODULE_10_core_js_library_fn_array_from__","__WEBPACK_IMPORTED_MODULE_11_core_js_library_fn_is_iterable__","__WEBPACK_IMPORTED_MODULE_12_core_js_library_fn_object_define_property__","__WEBPACK_IMPORTED_MODULE_13__chunk_82f2c815_js__","__WEBPACK_IMPORTED_MODULE_14_core_js_library_fn_symbol_iterator__","__WEBPACK_IMPORTED_MODULE_15__chunk_537b1685_js__","__WEBPACK_IMPORTED_MODULE_16_core_js_library_fn_symbol__","__WEBPACK_IMPORTED_MODULE_17_core_js_library_fn_object_get_prototype_of__","__WEBPACK_IMPORTED_MODULE_18_core_js_library_fn_object_set_prototype_of__","__WEBPACK_IMPORTED_MODULE_19_core_js_library_fn_object_create__","__WEBPACK_IMPORTED_MODULE_20_core_js_modules_es7_symbol_async_iterator__","__WEBPACK_IMPORTED_MODULE_21_core_js_modules_es6_symbol__","__WEBPACK_IMPORTED_MODULE_22_core_js_modules_es6_regexp_split__","__WEBPACK_IMPORTED_MODULE_23__chunk_dd3bd2eb_js__","__WEBPACK_IMPORTED_MODULE_26_core_js_modules_es6_reflect_own_keys__","__WEBPACK_IMPORTED_MODULE_27_core_js_library_fn_reflect_construct__","__WEBPACK_IMPORTED_MODULE_28__chunk_cda7b711_js__","__WEBPACK_IMPORTED_MODULE_29__chunk_03adc81b_js__","__WEBPACK_IMPORTED_MODULE_30_ol_Observable__","FeatureSelect","_classMixin","map","_this","this","call","select","_map","_boxSelection","toggleFeatureSelectListener","_onBoxEnd","bind","key","on","activate","offAll","deactivate","_this2","state","arguments","length","undefined","_listener","listenerKey","selectInteraction","e","selectedFeature","selected","dispatch","get","features","_features","BSM","feature","find","item","setTimeout","selectFeature","extent","_this3","searchFeature","then","res","updateFeatures","data","error","message"],"mappings":"uDAAAA,OAAAC,eAAAC,EAAA,cAAAC,OAAA,IAAAC,EAAA,YAAAC,EAAAD,EAAA,QAAAE,GAAAF,EAAAG,EAAAF,GAAAD,EAAA,SAAAI,GAAAJ,EAAAG,EAAAD,GAAAF,EAAA,SAAAK,GAAAL,EAAAG,EAAAC,GAAAJ,EAAA,SAAAM,GAAAN,EAAAG,EAAAE,GAAAL,EAAA,SAAAO,GAAAP,EAAAG,EAAAG,GAAAN,EAAA,SAAAQ,GAAAR,EAAAG,EAAAI,GAAAP,EAAA,QAAAA,EAAA,SAAAS,GAAAT,EAAAG,EAAAK,GAAAR,EAAA,SAAAU,EAAAV,EAAA,QAAAW,GAAAX,EAAAG,EAAAO,GAAAV,EAAA,SAAAY,GAAAZ,EAAAG,EAAAQ,GAAAX,EAAA,SAAAa,GAAAb,EAAAG,EAAAS,GAAAZ,EAAA,SAAAc,EAAAd,EAAA,QAAAe,GAAAf,EAAAG,EAAAW,GAAAd,EAAA,SAAAgB,EAAAhB,EAAA,QAAAiB,GAAAjB,EAAAG,EAAAa,GAAAhB,EAAA,SAAAkB,GAAAlB,EAAAG,EAAAc,GAAAjB,EAAA,SAAAmB,GAAAnB,EAAAG,EAAAe,GAAAlB,EAAA,SAAAoB,GAAApB,EAAAG,EAAAgB,GAAAnB,EAAA,SAAAqB,GAAArB,EAAAG,EAAAiB,GAAApB,EAAA,SAAAsB,GAAAtB,EAAAG,EAAAkB,GAAArB,EAAA,SAAAuB,GAAAvB,EAAAG,EAAAmB,GAAAtB,EAAA,SAAAwB,GAAAxB,EAAA,QAAAA,EAAA,QAAAA,EAAA,SAAAyB,GAAAzB,EAAAG,EAAAqB,GAAAxB,EAAA,SAAA0B,GAAA1B,EAAAG,EAAAsB,GAAAzB,EAAA,SAAA2B,EAAA3B,EAAA,QAAA4B,EAAA5B,EAAA,QAoCA6B,EAEA,SAAAC,GAGA,SAAAD,EAAAE,GACA,IAAAC,EAsBA,OApBIpC,OAAAiB,EAAA,EAAAjB,CAAeqC,KAAAJ,GAEnBG,EAAYpC,OAAAmB,EAAA,EAAAnB,CAA0BqC,KAAOrC,OAAAmB,EAAA,EAAAnB,CAAeiC,GAAAK,KAAAD,KAAA,qBAExDrC,OAAAiB,EAAA,EAAAjB,CAAgBA,OAAAmB,EAAA,EAAAnB,CAAsBoC,GAAA,eAEtCpC,OAAAiB,EAAA,EAAAjB,CAAgBA,OAAAmB,EAAA,EAAAnB,CAAsBoC,GAAA,wBAEtCpC,OAAAiB,EAAA,EAAAjB,CAAgBA,OAAAmB,EAAA,EAAAnB,CAAsBoC,GAAA,gBAEtCpC,OAAAiB,EAAA,EAAAjB,CAAgBA,OAAAmB,EAAA,EAAAnB,CAAsBoC,GAAA,aAC1CG,OAAA,OAGAH,EAAAI,KAAAL,EACAC,EAAAK,cAAA,IAA8BV,EAAA,EAAYI,GAE1CC,EAAAM,8BAEAN,EAAAO,UAAAP,EAAAO,UAAAC,KAA2C5C,OAAAmB,EAAA,EAAAnB,CAAsBoC,IACjEA,EAqFA,OA9GEpC,OAAAmB,EAAA,EAAAnB,CAASiC,EAAAC,GA4BTlC,OAAAiB,EAAA,EAAAjB,CAAYiC,IACdY,IAAA,iBACA1C,MAAA,WACAkC,KAAAI,cAAAK,GAAA,SAAAT,KAAAM,WAEAN,KAAAI,cAAAM,cAGAF,IAAA,mBACA1C,MAAA,WACAkC,KAAAI,cAAAO,SAEAX,KAAAI,cAAAQ,gBAGAJ,IAAA,8BACA1C,MAAA,WACA,IAAA+C,EAAAb,KAEAc,EAAAC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,IAAAf,KAAAkB,UAAAhB,OACAiB,EAAAnB,KAAAkB,UAAAhB,OAEAY,GACAK,GACAnB,KAAAK,8BAGAL,KAAAkB,UAAAhB,OAAAF,KAAAG,KAAAiB,kBAAAX,GAAA,kBAAAY,GACA,IAAAC,EAAAD,EAAAE,SAEAD,EAAAN,QACAH,EAAAW,SAAA,SAAAF,EAAA,GAAAG,IAAA,YAIQ9D,OAAAgC,EAAA,EAAAhC,CAAOwD,GACfnB,KAAAkB,UAAAhB,OAAA,SAIAM,IAAA,iBACA1C,MAAA,SAAA4D,GACA1B,KAAA2B,UAAAD,KAGAlB,IAAA,gBACA1C,MAAA,SAAA8D,GACA,IAAA9B,EAAAE,KAAAG,KAEA0B,EAAA7B,KAAA2B,UAAAG,KAAA,SAAAC,GACA,OAAAH,IAAAG,EAAAN,IAAA,SAGAI,GAAAG,WAAA,WACA,OAAAlC,EAAAmC,cAAAJ,IACO,QAGPrB,IAAA,YACA1C,MAAA,SAAAoE,GACA,IAAAC,EAAAnC,KAEAA,KAAAwB,SAAA,QAAAU,GAEAlC,KAAAG,KAAAiC,eACAF,WACOG,KAAA,SAAAC,GACPH,EAAAI,eAAAD,EAAAZ,UAEAS,EAAAX,SAAA,OACAV,OAAA,EACA0B,KAAAF,EAAAE,QAEO,SAAAC,GACPN,EAAAX,SAAA,OACAV,OAAA,EACA4B,QAAAD,UAMA7C,EA/GA,CAgHEjC,OAAA8B,EAAA,EAAA9B,CAAWa,EAAA,EAAUc,EAAA,IAERzB,EAAA","file":"static/js/42.5188fde3bab6eeed2efb.js","sourcesContent":["/*!\n * vue-webgis v0.7.3\n */\n\nimport 'vue';\nimport 'core-js/modules/es6.function.name';\nimport 'core-js/modules/es7.array.includes';\nimport 'core-js/modules/es6.string.includes';\nimport 'core-js/modules/es6.array.find';\nimport 'core-js/modules/web.dom.iterable';\nimport 'core-js/modules/es6.object.keys';\nimport './chunk-8430f437.js';\nimport 'core-js/library/fn/array/is-array';\nimport { G as GISEvent } from './chunk-2f41c7fa.js';\nimport 'core-js/library/fn/array/from';\nimport 'core-js/library/fn/is-iterable';\nimport 'core-js/library/fn/object/define-property';\nimport { a as _classCallCheck, b as _defineProperty, _ as _createClass } from './chunk-82f2c815.js';\nimport 'core-js/library/fn/symbol/iterator';\nimport { _ as _inherits, a as _possibleConstructorReturn, b as _getPrototypeOf, c as _assertThisInitialized } from './chunk-537b1685.js';\nimport 'core-js/library/fn/symbol';\nimport 'core-js/library/fn/object/get-prototype-of';\nimport 'core-js/library/fn/object/set-prototype-of';\nimport 'core-js/library/fn/object/create';\nimport 'core-js/modules/es7.symbol.async-iterator';\nimport 'core-js/modules/es6.symbol';\nimport 'core-js/modules/es6.regexp.split';\nimport { T as ToggleActive } from './chunk-dd3bd2eb.js';\nimport 'ol/interaction/DragBox';\nimport 'ol/Feature';\nimport 'core-js/modules/es6.reflect.own-keys';\nimport 'core-js/library/fn/reflect/construct';\nimport { c as classMixin } from './chunk-cda7b711.js';\nimport { B as BoxSelection } from './chunk-03adc81b.js';\nimport { unByKey } from 'ol/Observable';\n\nvar FeatureSelect =\n/*#__PURE__*/\nfunction (_classMixin) {\n  _inherits(FeatureSelect, _classMixin);\n\n  function FeatureSelect(map) {\n    var _this;\n\n    _classCallCheck(this, FeatureSelect);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FeatureSelect).call(this, 'start,select,end'));\n\n    _defineProperty(_assertThisInitialized(_this), \"_map\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_boxSelection\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_features\", []);\n\n    _defineProperty(_assertThisInitialized(_this), \"_listener\", {\n      select: null\n    });\n\n    _this._map = map;\n    _this._boxSelection = new BoxSelection(map);\n\n    _this.toggleFeatureSelectListener();\n\n    _this._onBoxEnd = _this._onBoxEnd.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(FeatureSelect, [{\n    key: \"activateHandle\",\n    value: function activateHandle() {\n      this._boxSelection.on('boxend', this._onBoxEnd);\n\n      this._boxSelection.activate();\n    }\n  }, {\n    key: \"deactivateHandle\",\n    value: function deactivateHandle() {\n      this._boxSelection.offAll();\n\n      this._boxSelection.deactivate();\n    }\n  }, {\n    key: \"toggleFeatureSelectListener\",\n    value: function toggleFeatureSelectListener() {\n      var _this2 = this;\n\n      var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : !this._listener.select;\n      var listenerKey = this._listener.select;\n\n      if (state) {\n        if (listenerKey) {\n          this.toggleFeatureSelectListener();\n        }\n\n        this._listener.select = this._map.selectInteraction.on('select', function (e) {\n          var selectedFeature = e.selected;\n\n          if (selectedFeature.length) {\n            _this2.dispatch('select', selectedFeature[0].get('BSM'));\n          }\n        });\n      } else {\n        unByKey(listenerKey);\n        this._listener.select = null;\n      }\n    }\n  }, {\n    key: \"updateFeatures\",\n    value: function updateFeatures(features) {\n      this._features = features;\n    }\n  }, {\n    key: \"selectFeature\",\n    value: function selectFeature(BSM) {\n      var map = this._map;\n\n      var feature = this._features.find(function (item) {\n        return BSM === item.get('BSM');\n      });\n\n      feature && setTimeout(function () {\n        return map.selectFeature(feature);\n      }, 300);\n    }\n  }, {\n    key: \"_onBoxEnd\",\n    value: function _onBoxEnd(extent) {\n      var _this3 = this;\n\n      this.dispatch('start', extent);\n\n      this._map.searchFeature({\n        extent: extent\n      }).then(function (res) {\n        _this3.updateFeatures(res.features);\n\n        _this3.dispatch('end', {\n          state: true,\n          data: res.data\n        });\n      }, function (error) {\n        _this3.dispatch('end', {\n          state: false,\n          message: error\n        });\n      });\n    }\n  }]);\n\n  return FeatureSelect;\n}(classMixin(GISEvent, ToggleActive));\n\nexport default FeatureSelect;\n//# sourceMappingURL=feature-select-4964532a.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@greatmap/vue-webgis/lib/feature-select-4964532a.js\n// module id = vA+1\n// module chunks = 42"],"sourceRoot":""}