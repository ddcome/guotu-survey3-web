{"version":3,"sources":["webpack:///./node_modules/@greatmap/vue-webgis/lib/layer-swipe-6e714bfc.js"],"names":["Object","defineProperty","__webpack_exports__","value","__WEBPACK_IMPORTED_MODULE_0_core_js_modules_web_dom_iterable__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_1_core_js_modules_es6_object_keys__","n","__WEBPACK_IMPORTED_MODULE_2_core_js_library_fn_object_define_property__","__WEBPACK_IMPORTED_MODULE_3__chunk_82f2c815_js__","__WEBPACK_IMPORTED_MODULE_4_core_js_library_fn_symbol_iterator__","__WEBPACK_IMPORTED_MODULE_5__chunk_537b1685_js__","__WEBPACK_IMPORTED_MODULE_6_core_js_library_fn_symbol__","__WEBPACK_IMPORTED_MODULE_7_core_js_library_fn_object_get_prototype_of__","__WEBPACK_IMPORTED_MODULE_8_core_js_library_fn_object_set_prototype_of__","__WEBPACK_IMPORTED_MODULE_9_core_js_library_fn_object_create__","__WEBPACK_IMPORTED_MODULE_10__chunk_dd3bd2eb_js__","__WEBPACK_IMPORTED_MODULE_11_ol_Observable__","LayerSwipe","_ToggleActive","_map","_this","this","call","precompose","postcompose","map","firstLayer","getTopVisibleLayer","_layer","getOlLayer","id","_olMap","olMap","_eventHub","eventHub","_restart","bind","_rectangleClip","key","type","_type","_value","render","arguments","length","undefined","_updateLayer","_listener","on","event","context","restore","listener","keys","forEach","off","toggleActive","ctx","canvas","canvasWidth","width","canvasHeight","height","percent","y","save","beginPath","rect","clip"],"mappings":"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","file":"static/js/39.ba3fe006000a4d4c1e94.js","sourcesContent":["/*!\n * vue-webgis v0.7.3\n */\n\nimport 'core-js/modules/web.dom.iterable';\nimport 'core-js/modules/es6.object.keys';\nimport 'core-js/library/fn/object/define-property';\nimport { a as _classCallCheck, b as _defineProperty, _ as _createClass } from './chunk-82f2c815.js';\nimport 'core-js/library/fn/symbol/iterator';\nimport { _ as _inherits, a as _possibleConstructorReturn, b as _getPrototypeOf, c as _assertThisInitialized } from './chunk-537b1685.js';\nimport 'core-js/library/fn/symbol';\nimport 'core-js/library/fn/object/get-prototype-of';\nimport 'core-js/library/fn/object/set-prototype-of';\nimport 'core-js/library/fn/object/create';\nimport { T as ToggleActive } from './chunk-dd3bd2eb.js';\nimport { unByKey } from 'ol/Observable';\n\nvar LayerSwipe =\n/*#__PURE__*/\nfunction (_ToggleActive) {\n  _inherits(LayerSwipe, _ToggleActive);\n\n  function LayerSwipe(_map) {\n    var _this;\n\n    _classCallCheck(this, LayerSwipe);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LayerSwipe).call(this));\n\n    _defineProperty(_assertThisInitialized(_this), \"_value\", 50);\n\n    _defineProperty(_assertThisInitialized(_this), \"_map\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_olMap\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_layer\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_type\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_listener\", {\n      precompose: null,\n      postcompose: null\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_eventHub\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_updateLayer\", function () {\n      var map = _this._map;\n      var firstLayer = map.getTopVisibleLayer();\n\n      if (firstLayer) {\n        _this._layer = map.getOlLayer(firstLayer.id)[0];\n      }\n    });\n\n    _this._map = _map;\n    _this._olMap = _map.olMap;\n    _this._eventHub = _map.eventHub;\n    _this._restart = _this._restart.bind(_assertThisInitialized(_this));\n    _this._rectangleClip = _this._rectangleClip.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(LayerSwipe, [{\n    key: \"changeType\",\n    value: function changeType(type) {\n      this._type = type;\n\n      this._restart();\n    }\n  }, {\n    key: \"changeValue\",\n    value: function changeValue(value) {\n      if (value < 0 || value > 100) {\n        value = value < 0 ? 0 : 100;\n      }\n\n      this._value = value;\n\n      this._olMap.render();\n    }\n  }, {\n    key: \"activateHandle\",\n    value: function activateHandle() {\n      var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this._type || 'vertical';\n      this._type = type;\n\n      this._updateLayer();\n\n      this._listener.precompose = this._layer.on('precompose', this._rectangleClip);\n      this._listener.postcompose = this._layer.on('postcompose', function (event) {\n        var ctx = event.context;\n        ctx.restore();\n      });\n\n      this._eventHub.on('layerChange', this._restart);\n    }\n  }, {\n    key: \"deactivateHandle\",\n    value: function deactivateHandle() {\n      this._layer = null;\n      var listener = this._listener;\n      Object.keys(listener).forEach(function (key) {\n        unByKey(listener[key]);\n        listener[key] = null;\n      });\n\n      this._olMap.render();\n\n      this._eventHub.off('layerChange', this._restart);\n    }\n  }, {\n    key: \"_restart\",\n    value: function _restart() {\n      this.toggleActive(true);\n    }\n  }, {\n    key: \"_rectangleClip\",\n    value: function _rectangleClip(event) {\n      var type = this._type;\n      var ctx = event.context;\n      var canvas = ctx.canvas;\n      var canvasWidth = canvas.width,\n          canvasHeight = canvas.height;\n      var percent = this._value / 100;\n      var x = 0,\n          y = 0,\n          width = 0,\n          height = 0;\n\n      if (type === 'vertical') {\n        width = canvasWidth * percent;\n        height = canvasHeight;\n      } else if (type === 'horizontal') {\n        width = canvasWidth;\n        height = canvasHeight * percent;\n        y = canvasHeight - height;\n      }\n\n      ctx.save();\n      ctx.beginPath();\n      ctx.rect(x, y, width, height);\n      ctx.clip();\n    }\n  }]);\n\n  return LayerSwipe;\n}(ToggleActive);\n\nexport default LayerSwipe;\n//# sourceMappingURL=layer-swipe-6e714bfc.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@greatmap/vue-webgis/lib/layer-swipe-6e714bfc.js\n// module id = ogC4\n// module chunks = 39"],"sourceRoot":""}