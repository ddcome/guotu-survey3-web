webpackJsonp([36],{MEre:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});r("7+uW");var n=r("EuXz"),a=(r.n(n),r("gbyG")),i=(r.n(a),r("Gh7F")),s=(r.n(i),r("WpTh")),o=(r.n(s),r("fx22")),c=(r.n(o),r("tJwI")),u=(r.n(c),r("bQXb"),r("XTu8")),l=(r.n(u),r("Puzn"),r("5zde")),v=(r.n(l),r("Xd32")),d=(r.n(v),r("9bBU")),y=(r.n(d),r("L5RK")),p=r("/n6Q"),b=(r.n(p),r("yQMH")),m=r("BwfY"),f=(r.n(m),r("fS6E")),O=(r.n(f),r("i/C/")),S=(r.n(O),r("oM7Q")),g=(r.n(S),r("mJx5")),j=(r.n(g),r("Vpnp")),h=r("xGqq"),T=(r.n(h),r("fG7N")),D=(r.n(T),r("swbA"),r("klrJ")),J=j.a.arcgisOrigin,P=j.a.superDataPath;var C=function(e){function t(e){return Object(y.b)(this,t),Object(b.b)(this,Object(b.c)(t).call(this,e))}return Object(b.a)(t,e),Object(y.a)(t,[{key:"doAnalysis",value:function(e){var t=this,r=e.inputServiceCode,n=e.inputFilter,a=e.overlayServiceCode,i=e.overlayFilter,s="diffAnalysis_overlay_"+Date.now();return Object(D.c)(s).then(function(e){return function(e){var t=e.serviceUrl,r=e.serviceId,n=e.name,a=e.inputServiceCode,i=e.inputFilter,s=e.overlayServiceCode,o=e.overlayFilter,c=e.overlayType,u=void 0===c?"Erase":c,l={url:"".concat(J,"/server/rest/services/DataStoreCatalogs/").concat(P,"/BigDataCatalogServer/").concat(a),name:"".concat(P,"-").concat(a)};i&&(l.filter=i);var v={url:"".concat(J,"/server/rest/services/DataStoreCatalogs/").concat(P,"/BigDataCatalogServer/").concat(s),name:"".concat(P,"-").concat(s)};return o&&(v.filter=o),Object(D.d)({serviceUrl:t,serviceId:r,name:n,overlayType:u,inputLayer:l,overlayLayer:v})}({serviceUrl:e.serviceurl,serviceId:e.itemId,name:s,inputServiceCode:r,inputFilter:n,overlayServiceCode:a,overlayFilter:i}).then(function(e){return t.getProgress("OverlayLayers",e.jobId).then(function(){return Object(D.f)(s,t._wkid).then(function(e){return t._map.interactions.zoom.toFeatures(t._map.renderFeatureData(e)),e})})})})}}]),t}(D.a);t.default=C},klrJ:function(e,t,r){"use strict";r.d(t,"a",function(){return m}),r.d(t,"b",function(){return p}),r.d(t,"c",function(){return v}),r.d(t,"d",function(){return y}),r.d(t,"e",function(){return d}),r.d(t,"f",function(){return b});var n=r("EuXz"),a=(r.n(n),r("bQXb")),i=r("Puzn"),s=r("L5RK"),o=r("yQMH"),c=r("Vpnp"),u=r("swbA"),l=c.a.superDataPath;function v(e){return Object(u.b)({url:"/portal/sharing/rest/content/users/admin/createService",method:"post",data:{f:"json",createParameters:JSON.stringify({currentVersion:10.2,serviceDescription:"",hasVersionedData:!1,supportsDisconnectedEditing:!1,hasStaticData:!0,maxRecordCount:2e3,supportedQueryFormats:"JSON",capabilities:"Query",description:"",copyrightText:"",allowGeometryUpdates:!1,syncEnabled:!1,editorTrackingInfo:{enableEditorTracking:!1,enableOwnershipAccessControl:!1,allowOthersToUpdate:!0,allowOthersToDelete:!0},xssPreventionInfo:{xssPreventionEnabled:!0,xssPreventionRule:"InputOnly",xssInputRule:"rejectInvalid"},tables:[],name:e,options:{dataSourceType:"spatiotemporal"}}),outputType:"featureService"},analysisToken:!0})}function d(e){var t=e.serviceUrl,r=e.serviceId,n=e.extent,a=e.wkid,i=e.distance,s=e.name,o=e.serviceCode;return Object(u.b)({url:"/server/rest/services/System/GeoAnalyticsTools/GPServer/CreateBuffers/submitJob",method:"post",data:{f:"json",inputLayer:JSON.stringify({url:"".concat(c.a.arcgisOrigin,"/server/rest/services/DataStoreCatalogs/").concat(l,"/BigDataCatalogServer/").concat(o),name:"".concat(l,"-").concat(o)}),distance:i||10,distanceUnit:"Meters",method:"Geodesic",dissolveOption:"None",OutputName:JSON.stringify({serviceProperties:{name:s,serviceUrl:t,itemProperties:{itemId:r}}}),context:JSON.stringify({extent:{xmin:n[0],ymin:n[1],xmax:n[2],ymax:n[3],spatialReference:{wkid:a,latestWkid:a}},outSR:{spatialReference:{wkid:a}}})},analysisToken:!0})}function y(e){var t=e.serviceUrl,r=e.serviceId,n=e.name,a=e.inputLayer,i=e.overlayLayer,s=e.overlayType,o=void 0===s?"Intersect":s;return Object(u.b)({url:"/server/rest/services/System/GeoAnalyticsTools/GPServer/OverlayLayers/submitJob",method:"post",data:{f:"json",inputLayer:JSON.stringify(a),overlayLayer:JSON.stringify(i),overlayType:o,dissolveOption:"None",OutputName:JSON.stringify({serviceProperties:{name:n,serviceUrl:t,itemProperties:{itemId:r}}})},analysisToken:!0})}function p(e){var t=e.serviceUrl,r=e.serviceId,n=e.name,a=e.inputLayer;return Object(u.b)({url:"/server/rest/services/System/GeoAnalyticsTools/getAnalysisProgress/SummarizeAttributes/submitJob",method:"post",data:{f:"json",inputLayer:JSON.stringify(a),fields:"DLBM_overlay,DLMC_overlay,ZLDWDM_overlay,ZLDWMC_overlay",summaryFields:JSON.stringify([{statisticType:"SUM",onStatisticField:"TBDLMJ_overlay"}]),OutputName:JSON.stringify({serviceProperties:{name:n,serviceUrl:t,itemProperties:{itemId:r}}})},analysisToken:!0})}function b(e,t){return Object(u.b)({url:"/server/rest/services/Hosted/".concat(e,"/FeatureServer/0/query"),method:"post",data:{where:"1=1",returnGeometry:!0,outFields:"*",outSR:t,f:"json",objectIds:"",returnDistinctValues:"",orderByFields:""}})}var m=function(e){function t(e){var r;return Object(s.b)(this,t),r=Object(o.b)(this,Object(o.c)(t).call(this,"next")),Object(s.c)(Object(o.d)(r),"_intervalTime",1500),Object(s.c)(Object(o.d)(r),"_vectorSource",void 0),Object(s.c)(Object(o.d)(r),"_map",void 0),r._vectorSource=e.vectorSource,r._map=e,r}return Object(o.a)(t,e),Object(s.a)(t,[{key:"getProgress",value:function(e,t){var r=this;return new Promise(function(n,i){var s=r;!function r(){(function(e,t){return Object(u.b)({url:"/server/rest/services/System/GeoAnalyticsTools/GPServer/".concat(e,"/jobs/").concat(t),params:{f:"json"},analysisToken:!0})})(e,t).then(function(e){var t=e?e.jobStatus:"";"esriJobSucceeded"===t?n(e):"esriJobFailed"!==t?(setTimeout(function(){return r()},s._intervalTime),Object(u.a)(e.messages)&&s.dispatch("next",e.messages&&e.messages.pop())):(Object(a.a)(e||e.message),i(e))},function(e){Object(a.a)(e||e.message),i(e)})}()})}}]),t}(i.a)}});
//# sourceMappingURL=36.666a4433f3f4359d8cdd.js.map