{"version":3,"sources":["webpack:///./node_modules/@greatmap/vue-webgis/lib/measure-0e5368de.js"],"names":["Object","defineProperty","__webpack_exports__","value","__WEBPACK_IMPORTED_MODULE_0_core_js_modules_web_dom_iterable__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_1_core_js_library_fn_object_define_property__","n","__WEBPACK_IMPORTED_MODULE_2__chunk_82f2c815_js__","__WEBPACK_IMPORTED_MODULE_3_core_js_library_fn_symbol_iterator__","__WEBPACK_IMPORTED_MODULE_4__chunk_537b1685_js__","__WEBPACK_IMPORTED_MODULE_5_core_js_library_fn_symbol__","__WEBPACK_IMPORTED_MODULE_6_core_js_library_fn_object_get_prototype_of__","__WEBPACK_IMPORTED_MODULE_7_core_js_library_fn_object_set_prototype_of__","__WEBPACK_IMPORTED_MODULE_8_core_js_library_fn_object_create__","__WEBPACK_IMPORTED_MODULE_9__chunk_dd3bd2eb_js__","__WEBPACK_IMPORTED_MODULE_10_ol_Overlay_js__","__WEBPACK_IMPORTED_MODULE_11_ol_Observable_js__","__WEBPACK_IMPORTED_MODULE_12_ol_geom_LineString__","__WEBPACK_IMPORTED_MODULE_13_ol_geom_Polygon__","Measure","_ToggleActive","map","_this","this","call","_map","_olMap","olMap","_drawInteraction","interactions","draw","key","type","_addInteraction","_removeInteraction","listener","measureTooltip","measureTooltipElement","_this2","toggleActive","on","resultData","tooltipCoordinate","measureTooltipObj","_createMeasureTooltip","geometry","evt","geom","target","output","formatGeometrySize","str","getInteriorPoint","getCoordinates","getLastCoordinate","innerHTML","setPosition","setOffset","offAll","document","createElement","className","element","offset","positioning","_measureTooltips","push","addOverlay","_this3","forEach","item","removeOverlay"],"mappings":"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","file":"static/js/38.72626476de9e1991a2bc.js","sourcesContent":["/*!\n * vue-webgis v0.7.3\n */\n\nimport 'core-js/modules/web.dom.iterable';\nimport 'core-js/library/fn/object/define-property';\nimport { a as _classCallCheck, b as _defineProperty, _ as _createClass } from './chunk-82f2c815.js';\nimport 'core-js/library/fn/symbol/iterator';\nimport { _ as _inherits, a as _possibleConstructorReturn, b as _getPrototypeOf, c as _assertThisInitialized } from './chunk-537b1685.js';\nimport 'core-js/library/fn/symbol';\nimport 'core-js/library/fn/object/get-prototype-of';\nimport 'core-js/library/fn/object/set-prototype-of';\nimport 'core-js/library/fn/object/create';\nimport { T as ToggleActive } from './chunk-dd3bd2eb.js';\nimport Overlay from 'ol/Overlay.js';\nimport { unByKey } from 'ol/Observable.js';\nimport LineString from 'ol/geom/LineString';\nimport Polygon from 'ol/geom/Polygon';\n\nvar Measure =\n/*#__PURE__*/\nfunction (_ToggleActive) {\n  _inherits(Measure, _ToggleActive);\n\n  function Measure(map) {\n    var _this;\n\n    _classCallCheck(this, Measure);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Measure).call(this));\n\n    _defineProperty(_assertThisInitialized(_this), \"_map\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_olMap\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_drawInteraction\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_measureTooltips\", []);\n\n    _this._map = map;\n    _this._olMap = map.olMap;\n    _this._drawInteraction = map.interactions.draw;\n    return _this;\n  }\n\n  _createClass(Measure, [{\n    key: \"activateHandle\",\n    value: function activateHandle(type) {\n      this._addInteraction(type);\n    }\n  }, {\n    key: \"deactivateHandle\",\n    value: function deactivateHandle() {\n      this._removeInteraction();\n    }\n  }, {\n    key: \"_addInteraction\",\n    value: function _addInteraction(type) {\n      var _this2 = this;\n\n      this._drawInteraction.toggleActive(true, type);\n\n      var listener;\n      var measureTooltip;\n      var measureTooltipElement;\n\n      this._drawInteraction.on('drawstart', function (resultData) {\n        var measureTooltipObj = _this2._createMeasureTooltip();\n\n        measureTooltip = measureTooltipObj.measureTooltip;\n        measureTooltipElement = measureTooltipObj.measureTooltipElement;\n        var tooltipCoordinate;\n        listener = resultData.geometry.on('change', function (evt) {\n          var geom = evt.target;\n\n          var output = _this2._map.formatGeometrySize(geom).str;\n\n          if (geom instanceof Polygon) {\n            tooltipCoordinate = geom.getInteriorPoint().getCoordinates();\n          } else if (geom instanceof LineString) {\n            tooltipCoordinate = geom.getLastCoordinate();\n          }\n\n          measureTooltipElement.innerHTML = output;\n          measureTooltip.setPosition(tooltipCoordinate);\n        });\n      });\n\n      this._drawInteraction.on('drawend', function () {\n        measureTooltip.setOffset([0, -7]);\n        measureTooltip = null;\n        measureTooltipElement = null;\n        unByKey(listener);\n      });\n    }\n  }, {\n    key: \"_removeInteraction\",\n    value: function _removeInteraction() {\n      this._drawInteraction.toggleActive(false);\n\n      this._drawInteraction.offAll();\n    }\n  }, {\n    key: \"_createMeasureTooltip\",\n    value: function _createMeasureTooltip() {\n      var measureTooltipElement = document.createElement('div');\n      measureTooltipElement.className = 'webgis-measure-tooltip webgis-measure-tooltip-measure';\n      var measureTooltip = new Overlay({\n        element: measureTooltipElement,\n        offset: [0, -15],\n        positioning: 'bottom-center'\n      });\n\n      this._measureTooltips.push(measureTooltip);\n\n      this._olMap.addOverlay(measureTooltip);\n\n      return {\n        measureTooltip: measureTooltip,\n        measureTooltipElement: measureTooltipElement\n      };\n    }\n  }, {\n    key: \"_removeMeasureTooltip\",\n    value: function _removeMeasureTooltip() {\n      var _this3 = this;\n\n      this._measureTooltips.forEach(function (item) {\n        return _this3._olMap.removeOverlay(item);\n      });\n\n      this._measureTooltips = [];\n    }\n  }]);\n\n  return Measure;\n}(ToggleActive);\n\nexport default Measure;\n//# sourceMappingURL=measure-0e5368de.js.map\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@greatmap/vue-webgis/lib/measure-0e5368de.js\n// module id = L2Me\n// module chunks = 38"],"sourceRoot":""}